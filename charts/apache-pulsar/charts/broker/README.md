# Apache Pulsar Broker



## Introduction

## Prerequisites

## Parameters

### Image parameters

| Name                | Description                                          | Value                    |
| ------------------- | ---------------------------------------------------- | ------------------------ |
| `image.registry`    | Component image registry                             | `""`                     |
| `image.repository`  | Component image repository                           | `datastax/lunastreaming` |
| `image.tag`         | Component image tag (immutable tags are recommended) | `2.10_2.2`               |
| `image.pullPolicy`  | Component image pull policy                          | `IfNotPresent`           |
| `image.pullSecrets` | Specify docker-registry secret names as an array     | `[]`                     |


### Certificate Resources

Configure the component's certificate

| Name                                                            | Description                                                                                                                                           | Value |
| --------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------- | ----- |
| `certificateResources.tlsSecretName`                            |                                                                                                                                                       | `nil` |
| `certificateResources.jksPasswordSecretName`                    |                                                                                                                                                       | `nil` |
| `certificateResources.certificateRequest`                       | Refer to the [CertificateSpec](https://cert-manager.io/docs/reference/api-docs/#cert-manager.io/v1.CertificateSpec) for more info about these values. |       |
| `certificateResources.certificateRequest.renewBefore`           | How long before the currently issued certificate’s expiry cert-manager should renew the certificate. Default is 2/3 of the duration.                  | `nil` |
| `certificateResources.certificateRequest.duration`              | The requested ‘duration’ (i.e. lifetime) of the Certificate. Default is 90 days                                                                       | `nil` |
| `certificateResources.certificateRequest.subject.organizations` | Organizations to be used on the Certificate                                                                                                           | `[]`  |
| `certificateResources.certificateRequest.privateKey`            | Options to control private keys used for the Certificate                                                                                              | `{}`  |
| `certificateResources.certificateRequest.issuerRef`             | IssuerRef is a reference to the issuer for this certificate                                                                                           | `{}`  |


### Pulsar Environment Configuration

| Name                             | Description                                                                                               | Value                                                                              |
| -------------------------------- | --------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------- |
| `pulsarEnv.confPath`             | The full path where configuration files are held                                                          | `/pulsar/conf`                                                                     |
| `pulsarEnv.gc`                   | A collection of JVM settings garbage collection settings                                                  | `["-XX:+UseG1GC"]`                                                                 |
| `pulsarEnv.mem`                  | A collection of JVM memory settings                                                                       | `["-Xms1g","-Xmx1g","-Dcom.sun.management.jmxremote","-Djute.maxbuffer=10485760"]` |
| `pulsarEnv.loggingLevels.root`   | Applies the pulsar.log.root.level JVM option                                                              | `error`                                                                            |
| `pulsarEnv.loggingLevels.pulsar` | Applies the PULSAR_LOG_LEVEL env var                                                                      | `error`                                                                            |
| `pulsarEnv.extraOpts`            | A collection of extra options to be passed to the jvm. Format each as the entire key/value                | `["-Dlog4j2.formatMsgNoLookups=true"]`                                             |
| `pulsarEnv.extraClasspath`       | A collection of extra paths for the pulsar classpath. Include just the folder or file path, no delimiter. | `[]`                                                                               |
| `pulsarEnv.stopTimeout`          | Time to wait for an instance to stop before getting forceful                                              | `5`                                                                                |


### broker configuration

Configure broker settings. Refer to the [project's documentation](https://pulsar.apache.org/docs/reference-configuration#broker) for a full spec.

> Note, the values not documented here are set by the parent chart

| Name                                                             | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Value                                                                                        |
| ---------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------- |
| `config.acknowledgmentAtBatchIndexLevelEnabled`                  | Enable or disable the batch index acknowledgement.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `false`                                                                                      |
| `config.activeConsumerFailoverDelayTimeMillis`                   | How long to delay rewinding cursor and dispatching messages when active consumer is changed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | `1000`                                                                                       |
| `config.additionalServletDirectory`                              | Location of broker additional servlet NAR directory                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `./brokerAdditionalServlet`                                                                  |
| `config.additionalServlets`                                      | Additional servlet name. If you have multiple additional servlets, separate them by commas. For example, additionalServlet_1, additionalServlet_2                                                                                                                                                                                                                                                                                                                                                                                                                                    | `nil`                                                                                        |
| `config.advertisedListeners`                                     | Specify multiple advertised listeners for the broker. The format is <listener_name>:pulsar://<host>:<port>. If there are multiple listeners, separate them with commas. Note: do not use this configuration with advertisedAddress and brokerServicePort. If the value of this configuration is empty, the broker uses advertisedAddress and brokerServicePort                                                                                                                                                                                                                       | `nil`                                                                                        |
| `config.allowAutoSubscriptionCreation`                           | Enable subscription auto creation if a new consumer connected                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `true`                                                                                       |
| `config.allowAutoTopicCreation`                                  | Enable topic auto creation if a new producer or consumer connected                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `true`                                                                                       |
| `config.allowAutoTopicCreationType`                              | The type of topic that is allowed to be automatically created.(partitioned/non-partitioned)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `partitioned`                                                                                |
| `config.authenticateOriginalAuthData`                            | If this flag is set to true, the broker authenticates the original Auth data; else it just accepts the originalPrincipal and authorizes it (if required).                                                                                                                                                                                                                                                                                                                                                                                                                            | `false`                                                                                      |
| `config.authenticationRefreshCheckSeconds`                       | Interval of time for checking for expired authentication credentials                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `60`                                                                                         |
| `config.autoSkipNonRecoverableData`                              | Skip reading non-recoverable/unreadable data-ledger under managed-ledger’s list.It helps when data-ledgers gets corrupted at bookkeeper and managed-cursor is stuck at that ledger.                                                                                                                                                                                                                                                                                                                                                                                                  | `false`                                                                                      |
| `config.backlogQuotaCheckEnabled`                                | Enable backlog quota check. Enforces action on topic when the quota is reached                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `true`                                                                                       |
| `config.backlogQuotaCheckIntervalInSeconds`                      | How often to check for topics that have reached the quota                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | `60`                                                                                         |
| `config.backlogQuotaDefaultLimitBytes`                           | The default per-topic backlog quota limit. Being less than 0 means no limitation. By default, it is -1.                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | `-1`                                                                                         |
| `config.backlogQuotaDefaultRetentionPolicy`                      | The defaulted backlog quota retention policy. By Default, it is producer_request_hold.'producer_request_hold' Policy which holds producer's send request until the resource becomes available (or holding times out) 'producer_exception' Policy which throws javax.jms.ResourceAllocationException to the producer 'consumer_backlog_eviction' Policy which evicts the oldest message from the slowest consumer's backlog                                                                                                                                                           | `producer_request_hold`                                                                      |
| `config.bindAddresses`                                           | Additional Hostname or IP addresses the service binds on: listener_name:scheme://host:port,....                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `nil`                                                                                        |
| `config.bookkeeperClientEnforceMinNumRacksPerWriteQuorum`        | Enforces rack-aware bookie selection policy to pick bookies from 'bookkeeperClientMinNumRacksPerWriteQuorum' racks for a writeQuorum. If BK can't find bookie then it would throw BKNotEnoughBookiesException instead of picking random one.                                                                                                                                                                                                                                                                                                                                         | `false`                                                                                      |
| `config.bookkeeperClientGetBookieInfoIntervalSeconds`            | Set the interval to periodically check bookie info                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `86400`                                                                                      |
| `config.bookkeeperClientGetBookieInfoRetryIntervalSeconds`       | Set the interval to retry a failed bookie info lookup                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `60`                                                                                         |
| `config.bookkeeperClientHealthCheckEnabled`                      | Enable bookies health check. Bookies that have more than the configured number of failure within the interval will be quarantined for some time. During this period, new ledgers won’t be created on these bookies                                                                                                                                                                                                                                                                                                                                                                   | `true`                                                                                       |
| `config.bookkeeperClientHealthCheckErrorThresholdPerInterval`    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `5`                                                                                          |
| `config.bookkeeperClientHealthCheckIntervalSeconds`              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `60`                                                                                         |
| `config.bookkeeperClientHealthCheckQuarantineTimeInSeconds`      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `1800`                                                                                       |
| `config.bookkeeperClientIsolationGroups`                         | Enable bookie isolation by specifying a list of bookie groups to choose from. Any bookie outside the specified groups will not be used by the broker                                                                                                                                                                                                                                                                                                                                                                                                                                 | `nil`                                                                                        |
| `config.bookkeeperClientMinAvailableBookiesInIsolationGroups`    | Minimum bookies that should be available as part of bookkeeperClientIsolationGroups else broker will include bookkeeperClientSecondaryIsolationGroups bookies in isolated list.                                                                                                                                                                                                                                                                                                                                                                                                      | `nil`                                                                                        |
| `config.bookkeeperClientMinNumRacksPerWriteQuorum`               | Minimum number of racks per write quorum. BK rack-aware bookie selection policy will try to get bookies from at least 'bookkeeperClientMinNumRacksPerWriteQuorum' racks for a write quorum.                                                                                                                                                                                                                                                                                                                                                                                          | `2`                                                                                          |
| `config.bookkeeperClientNumWorkerThreads`                        | Number of BookKeeper client worker threads. Default is Runtime.getRuntime().availableProcessors()                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | `nil`                                                                                        |
| `config.bookkeeperClientRackawarePolicyEnabled`                  | Enable rack-aware bookie selection policy. BK will choose bookies from different racks when forming a new bookie ensemble                                                                                                                                                                                                                                                                                                                                                                                                                                                            | `true`                                                                                       |
| `config.bookkeeperClientRegionawarePolicyEnabled`                | Enable region-aware bookie selection policy. BK will choose bookies from different regions and racks when forming a new bookie ensemble. If enabled, the value of bookkeeperClientRackawarePolicyEnabled is ignored                                                                                                                                                                                                                                                                                                                                                                  | `false`                                                                                      |
| `config.bookkeeperClientReorderReadSequenceEnabled`              | Enable/disable reordering read sequence on reading entries.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `false`                                                                                      |
| `config.bookkeeperClientSecondaryIsolationGroups`                | Enable bookie secondary-isolation group if bookkeeperClientIsolationGroups doesn't have enough bookie available.                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `nil`                                                                                        |
| `config.bookkeeperClientSpeculativeReadTimeoutInMillis`          | Speculative reads are initiated if a read request doesn’t complete within a certain time Using a value of 0, is disabling the speculative reads                                                                                                                                                                                                                                                                                                                                                                                                                                      | `0`                                                                                          |
| `config.bookkeeperClientTimeoutInSeconds`                        | Timeout for BK add / read operations                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `30`                                                                                         |
| `config.bookkeeperEnableStickyReads`                             | Enable/disable having read operations for a ledger to be sticky to a single bookie. If this flag is enabled, the client will use one single bookie (by preference) to read all entries for a ledger.                                                                                                                                                                                                                                                                                                                                                                                 | `true`                                                                                       |
| `config.bookkeeperNumberOfChannelsPerBookie`                     | Number of channels per bookie                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `16`                                                                                         |
| `config.brokerClientSslProvider`                                 | The TLS Provider used by internal client to authenticate with other Pulsar brokers                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `nil`                                                                                        |
| `config.brokerClientTlsCiphers`                                  | Specify the tls cipher the internal client will use to negotiate during TLS Handshake. (a comma-separated list of ciphers) e.g. [TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256]                                                                                                                                                                                                                                                                                                                                                                                                              | `nil`                                                                                        |
| `config.brokerClientTlsProtocols`                                | Specify the tls protocols the broker will use to negotiate during TLS handshake. (a comma-separated list of protocol names). e.g. TLSv1.3, TLSv1.2                                                                                                                                                                                                                                                                                                                                                                                                                                   | `nil`                                                                                        |
| `config.brokerDeduplicationEnabled`                              | Sets the default behavior for message deduplication in the broker. If enabled, the broker will reject messages that were already stored in the topic. This setting can be overridden on a per-namespace basis.                                                                                                                                                                                                                                                                                                                                                                       | `false`                                                                                      |
| `config.brokerDeduplicationEntriesInterval`                      | The number of entries after which a deduplication informational snapshot is taken. A larger interval will lead to fewer snapshots being taken, though this would also lengthen the topic recovery time (the time required for entries published after the snapshot to be replayed).                                                                                                                                                                                                                                                                                                  | `1000`                                                                                       |
| `config.brokerDeduplicationMaxNumberOfProducers`                 | The maximum number of producers for which information will be stored for deduplication purposes.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `10000`                                                                                      |
| `config.brokerDeduplicationProducerInactivityTimeoutMinutes`     | The time of inactivity (in minutes) after which the broker will discard deduplication information related to a disconnected producer.                                                                                                                                                                                                                                                                                                                                                                                                                                                | `360`                                                                                        |
| `config.brokerDeduplicationSnapshotFrequencyInSeconds`           | How often is the thread pool scheduled to check whether a snapshot needs to be taken. The value of 0 means it is disabled.                                                                                                                                                                                                                                                                                                                                                                                                                                                           | `120`                                                                                        |
| `config.brokerDeduplicationSnapshotIntervalSeconds`              | The time period after which a deduplication informational snapshot is taken. It runs simultaneously with brokerDeduplicationEntriesInterval.                                                                                                                                                                                                                                                                                                                                                                                                                                         | `120`                                                                                        |
| `config.brokerDeleteInactiveTopicsEnabled`                       | Enable the deletion of inactive topics. If topics are not consumed for some while, these inactive topics might be cleaned up. Deleting inactive topics is enabled by default. The default period is 1 minute. Note: When brokerDeleteInactiveTopicsEnabled is set to true, you need to ensure that allowAutoTopicCreation is also set to true.                                                                                                                                                                                                                                       | `true`                                                                                       |
| `config.brokerDeleteInactiveTopicsFrequencySeconds`              | How often to check for inactive topics                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | `60`                                                                                         |
| `config.brokerDeleteInactiveTopicsMaxInactiveDurationSeconds`    | Set the maximum duration for inactive topics. If it is not specified, the brokerDeleteInactiveTopicsFrequencySeconds parameter is adopted.                                                                                                                                                                                                                                                                                                                                                                                                                                           | `nil`                                                                                        |
| `config.brokerDeleteInactiveTopicsMode`                          | Set the mode to delete inactive topics.delete_when_no_subscriptions: delete the topic which has no subscriptions or active producers. delete_when_subscriptions_caught_up: delete the topic whose subscriptions have no backlogs and which has no active producers or consumers.                                                                                                                                                                                                                                                                                                     | `delete_when_no_subscriptions`                                                               |
| `config.brokerEntryMetadataInterceptors`                         | Set broker entry metadata interceptors. Multiple interceptors should be separated by commas. Available values:org.apache.pulsar.common.intercept.AppendBrokerTimestampMetadataInterceptor, org.apache.pulsar.common.intercept.AppendIndexMetadataInterceptor                                                                                                                                                                                                                                                                                                                         | `nil`                                                                                        |
| `config.brokerServiceCompactionMonitorIntervalInSeconds`         | Interval between checks to determine whether topics with compaction policies need compaction.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `60`                                                                                         |
| `config.brokerServiceCompactionThresholdInBytes`                 | If the estimated backlog size is greater than this threshold, compression is triggered. Set this threshold to 0 means disabling the compression check.                                                                                                                                                                                                                                                                                                                                                                                                                               | `nil`                                                                                        |
| `config.brokerShutdownTimeoutMs`                                 | Time to wait for broker graceful shutdown. After this time elapses, the process will be killed                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `60000`                                                                                      |
| `config.clientLibraryVersionCheckAllowUnversioned`               | Allow client libraries with no version information                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `true`                                                                                       |
| `config.clientLibraryVersionCheckEnabled`                        | Enable check for minimum allowed client library version                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | `false`                                                                                      |
| `config.defaultNamespaceBundleSplitAlgorithm`                    | Default algorithm name for namespace bundle split                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | `range_equally_divide`                                                                       |
| `config.defaultNumPartitions`                                    | The number of partitioned topics that is allowed to be automatically created if allowAutoTopicCreationType is partitioned                                                                                                                                                                                                                                                                                                                                                                                                                                                            | `1`                                                                                          |
| `config.defaultRetentionSizeInMB`                                | Default retention size                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | `0`                                                                                          |
| `config.defaultRetentionTimeInMinutes`                           | Default message retention time                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `0`                                                                                          |
| `config.delayedDeliveryEnabled`                                  | Whether to enable the delayed delivery for messages. If disabled, messages will be immediately delivered and there will be no tracking overhead.                                                                                                                                                                                                                                                                                                                                                                                                                                     | `true`                                                                                       |
| `config.delayedDeliveryTickTimeMillis`                           | Control the tick time for retrying on delayed delivery, which affects the accuracy of the delivery time compared to the scheduled time. By default, it is 1 second.                                                                                                                                                                                                                                                                                                                                                                                                                  | `1000`                                                                                       |
| `config.dispatchThrottlingOnBatchMessageEnabled`                 | Apply dispatch rate limiting on batch message instead individual messages with in batch message. (Default is disabled).                                                                                                                                                                                                                                                                                                                                                                                                                                                              | `false`                                                                                      |
| `config.dispatchThrottlingRateInByte`                            | Dispatch throttling-limit of bytes for a broker (per second). 0 means the dispatch throttling-limit is disabled.                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `0`                                                                                          |
| `config.dispatchThrottlingRateInMsg`                             | Dispatch throttling-limit of messages for a broker (per second). 0 means the dispatch throttling-limit is disabled.                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `0`                                                                                          |
| `config.dispatchThrottlingRatePerReplicatorInByte`               | The default bytes per second dispatch throttling-limit for every replicator in replication. The value of 0 means disabling replication message-byte dispatch-throttling                                                                                                                                                                                                                                                                                                                                                                                                              | `0`                                                                                          |
| `config.dispatchThrottlingRatePerReplicatorInMsg`                | The default messages per second dispatch throttling-limit for every replicator in replication. The value of 0 means disabling replication message dispatch-throttling                                                                                                                                                                                                                                                                                                                                                                                                                | `0`                                                                                          |
| `config.dispatchThrottlingRatePerSubscriptionInByte`             | Dispatch throttling-limit of bytes for a subscription. 0 means the dispatch throttling-limit is disabled.                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | `0`                                                                                          |
| `config.dispatchThrottlingRatePerSubscriptionInMsg`              | Dispatch throttling-limit of messages for a subscription. 0 means the dispatch throttling-limit is disabled.                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | `0`                                                                                          |
| `config.dispatchThrottlingRatePerTopicInByte`                    | Dispatch throttling-limit of bytes for every topic (per second). 0 means the dispatch throttling-limit is disabled.                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `0`                                                                                          |
| `config.dispatchThrottlingRatePerTopicInMsg`                     | Dispatch throttling-limit of messages for every topic (per second). 0 means the dispatch throttling-limit is disabled.                                                                                                                                                                                                                                                                                                                                                                                                                                                               | `0`                                                                                          |
| `config.dispatchThrottlingRateRelativeToPublishRate`             | Enable dispatch rate-limiting relative to publish rate.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | `false`                                                                                      |
| `config.enableExposingBrokerEntryMetadataToClient`               | Whether to expose broker entry metadata to client or not.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | `false`                                                                                      |
| `config.enableNonPersistentTopics`                               | Whether non-persistent topics are enabled on the broker                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | `true`                                                                                       |
| `config.enablePackagesManagement`                                | Enable the packages management service or not                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `false`                                                                                      |
| `config.enablePersistentTopics`                                  | Whether persistent topics are enabled on the broker                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `true`                                                                                       |
| `config.enableReplicatedSubscriptions`                           | Whether to enable tracking of replicated subscriptions state across clusters.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `true`                                                                                       |
| `config.exposeConsumerLevelMetricsInPrometheus`                  | Whether to enable consumer level metrics.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | `false`                                                                                      |
| `config.exposePreciseBacklogInPrometheus`                        | Enable expose the precise backlog stats, set false to use published counter and consumed counter to calculate, this would be more efficient but may be inaccurate.                                                                                                                                                                                                                                                                                                                                                                                                                   | `false`                                                                                      |
| `config.exposePublisherStats`                                    | Whether to enable topic level metrics.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | `true`                                                                                       |
| `config.exposeTopicLevelMetricsInPrometheus`                     | Whether to enable topic level metrics.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | `true`                                                                                       |
| `config.fileSystemProfilePath`                                   | For File System Storage, file system profile path.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `../conf/filesystem_offload_core_site.xml`                                                   |
| `config.fileSystemURI`                                           | For File System Storage, file system uri.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | `nil`                                                                                        |
| `config.forceDeleteNamespaceAllowed`                             | Enable you to delete a namespace forcefully.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | `false`                                                                                      |
| `config.forceDeleteTenantAllowed`                                | Enable you to delete a tenant forcefully.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | `false`                                                                                      |
| `config.gcsManagedLedgerOffloadBucket`                           | For Google Cloud Storage ledger offload, Bucket to place offloaded ledger into.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `nil`                                                                                        |
| `config.gcsManagedLedgerOffloadMaxBlockSizeInBytes`              | For Google Cloud Storage ledger offload, the maximum block size in bytes. (64MB by default, 5MB minimum)                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | `67108864`                                                                                   |
| `config.gcsManagedLedgerOffloadReadBufferSizeInBytes`            | For Google Cloud Storage ledger offload, Read buffer size in bytes. (1MB by default)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `1048576`                                                                                    |
| `config.gcsManagedLedgerOffloadRegion`                           | For Google Cloud Storage ledger offload, region where offload bucket is located. Go to this page for more details: https://cloud.google.com/storage/docs/bucket-locations .                                                                                                                                                                                                                                                                                                                                                                                                          | `nil`                                                                                        |
| `config.gcsManagedLedgerOffloadServiceAccountKeyFile`            | For Google Cloud Storage, path to json file containing service account credentials. For more details, see the "Service Accounts" section of https://support.google.com/googleapi/answer/6158849 .                                                                                                                                                                                                                                                                                                                                                                                    | `nil`                                                                                        |
| `config.haProxyProtocolEnabled`                                  | Enable or disable the HAProxy protocol.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | `false`                                                                                      |
| `config.internalListenerName`                                    | Specify the internal listener name for the broker. Note: the listener name must be contained in advertisedListeners. If the value of this configuration is empty, the broker uses the first listener as the internal listener.                                                                                                                                                                                                                                                                                                                                                       | `/`                                                                                          |
| `config.isAllowAutoUpdateSchemaEnabled`                          | Allow schema to be auto updated at broker level.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `true`                                                                                       |
| `config.isSchemaValidationEnforced`                              | Whether to enable schema validation, when schema validation is enabled, if a producer without a schema attempts to produce the message to a topic with schema, the producer is rejected and disconnected.                                                                                                                                                                                                                                                                                                                                                                            | `false`                                                                                      |
| `config.jvmGCMetricsLoggerClassName`                             | Classname of Pluggable JVM GC metrics logger that can log GC specific metrics.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `nil`                                                                                        |
| `config.keepAliveIntervalSeconds`                                | How often to check whether the connections are still alive                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | `30`                                                                                         |
| `config.lazyCursorRecovery`                                      | Whether to recover cursors lazily when trying to recover a managed ledger backing a persistent topic. It can improve write availability of topics. The caveat is now when recovered ledger is ready to write we're not sure if all old consumers' last mark delete position(ack position) can be recovered or not. So user can make the trade off or have custom logic in application to checkpoint consumer state.                                                                                                                                                                  | `false`                                                                                      |
| `config.loadBalancerAutoBundleSplitEnabled`                      | enable/disable namespace bundle auto split                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | `false`                                                                                      |
| `config.loadBalancerBrokerComfortLoadLevelPercentage`            | Usage threshold to determine a broker is having just right level of load                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | `65`                                                                                         |
| `config.loadBalancerBrokerMaxTopics`                             | Usage threshold to allocate max number of topics to broker                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | `50000`                                                                                      |
| `config.loadBalancerBrokerOverloadedThresholdPercentage`         | Usage threshold to determine a broker as over-loaded                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `85`                                                                                         |
| `config.loadBalancerBrokerUnderloadedThresholdPercentage`        | Usage threshold to determine a broker as under-loaded                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `1`                                                                                          |
| `config.loadBalancerEnabled`                                     | Enable load balancer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `true`                                                                                       |
| `config.loadBalancerHostUsageCheckIntervalMinutes`               | Frequency of report to collect                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `1`                                                                                          |
| `config.loadBalancerLoadSheddingStrategy`                        | The shedding strategy of load balance. Available values:org.apache.pulsar.broker.loadbalance.impl.ThresholdShedder, org.apache.pulsar.broker.loadbalance.impl.OverloadShedder, org.apache.pulsar.broker.loadbalance.impl.UniformLoadShedder For the comparisons of the shedding strategies, see here.                                                                                                                                                                                                                                                                                | `org.apache.pulsar.broker.loadbalance.impl.ThresholdShedder`                                 |
| `config.loadBalancerNamespaceBundleMaxBandwidthMbytes`           | maximum bandwidth (in + out) in a bundle, otherwise bundle split will be triggered                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `100`                                                                                        |
| `config.loadBalancerNamespaceBundleMaxMsgRate`                   | maximum msgRate (in + out) in a bundle, otherwise bundle split will be triggered                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `1000`                                                                                       |
| `config.loadBalancerNamespaceBundleMaxSessions`                  | maximum sessions (producers + consumers) in a bundle, otherwise bundle split will be triggered                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `1000`                                                                                       |
| `config.loadBalancerNamespaceBundleMaxTopics`                    | maximum topics in a bundle, otherwise bundle split will be triggered                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `1000`                                                                                       |
| `config.loadBalancerNamespaceMaximumBundles`                     | maximum number of bundles in a namespace                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | `128`                                                                                        |
| `config.loadBalancerPlacementStrategy`                           | Strategy to assign a new bundle weightedRandomSelection                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | `nil`                                                                                        |
| `config.loadBalancerReportUpdateMaxIntervalMinutes`              | Maximum interval to update load report                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | `15`                                                                                         |
| `config.loadBalancerReportUpdateThresholdPercentage`             | Percentage of change to trigger load report update                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `10`                                                                                         |
| `config.loadBalancerResourceQuotaUpdateIntervalMinutes`          | Interval to update namespace bundle resource quota                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `15`                                                                                         |
| `config.loadBalancerSheddingGracePeriodMinutes`                  | Prevent the same topics to be shed and moved to other broker more than once within this timeframe                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | `30`                                                                                         |
| `config.loadBalancerSheddingIntervalMinutes`                     | Load shedding interval. Broker periodically checks whether some traffic should be offload from some over-loaded broker to other under-loaded brokers                                                                                                                                                                                                                                                                                                                                                                                                                                 | `30`                                                                                         |
| `config.loadManagerClassName`                                    | Name of load manager to use                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `org.apache.pulsar.broker.loadbalance.impl.SimpleLoadManagerImpl`                            |
| `config.managedLedgerCacheCopyEntries`                           | Whether we should make a copy of the entry payloads when inserting in cache                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `false`                                                                                      |
| `config.managedLedgerCacheEvictionFrequency`                     | Configure the cache eviction frequency for the managed ledger cache (evictions/sec)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `100`                                                                                        |
| `config.managedLedgerCacheEvictionTimeThresholdMillis`           | All entries that have stayed in cache for more than the configured time, will be evicted                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | `1000`                                                                                       |
| `config.managedLedgerCacheEvictionWatermark`                     | Threshold to which bring down the cache level when eviction is triggered                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | `0.9`                                                                                        |
| `config.managedLedgerCacheSizeMB`                                | Amount of memory to use for caching data payload in managed ledger. This memory is allocated from JVM direct memory and it’s shared across all the topics running in the same broker. By default, uses 1/5th of available direct memory                                                                                                                                                                                                                                                                                                                                              | `nil`                                                                                        |
| `config.managedLedgerCursorBackloggedThreshold`                  | Configure the threshold (in number of entries) from where a cursor should be considered 'backlogged' and thus should be set as inactive.                                                                                                                                                                                                                                                                                                                                                                                                                                             | `1000`                                                                                       |
| `config.managedLedgerCursorMaxEntriesPerLedger`                  | Max number of entries to append to a cursor ledger                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `50000`                                                                                      |
| `config.managedLedgerCursorRolloverTimeInSeconds`                | Max time before triggering a rollover on a cursor ledger                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | `14400`                                                                                      |
| `config.managedLedgerDefaultAckQuorum`                           | Number of guaranteed copies (acks to wait before write is complete)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `2`                                                                                          |
| `config.managedLedgerDefaultEnsembleSize`                        | Number of bookies to use when creating a ledger                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `2`                                                                                          |
| `config.managedLedgerDefaultMarkDeleteRateLimit`                 | Rate limit the amount of writes per second generated by consumer acking the messages                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `1`                                                                                          |
| `config.managedLedgerDefaultWriteQuorum`                         | Number of copies to store for each message                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | `2`                                                                                          |
| `config.managedLedgerInactiveLedgerRolloverTimeSeconds`          | Time to rollover ledger for inactive topic                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | `0`                                                                                          |
| `config.managedLedgerInfoCompressionType`                        | Compression type of managed ledger information. Available options are NONE, LZ4, ZLIB, ZSTD, and SNAPPY). If this value is NONE or invalid, the managedLedgerInfo is not compressed. Note that after enabling this configuration, if you want to degrade a broker, you need to change the value to NONE and make sure all ledger metadata is saved without compression.                                                                                                                                                                                                              | `None`                                                                                       |
| `config.managedLedgerMaxEntriesPerLedger`                        | The max number of entries to append to a ledger before triggering a rollover. A ledger rollover is triggered after the min rollover time has passed and one of the following conditions is true:The max rollover time has been reached. The max entries have been written to the ledger. The max ledger size has been written to the ledger                                                                                                                                                                                                                                          | `50000`                                                                                      |
| `config.managedLedgerMaxLedgerRolloverTimeMinutes`               | Maximum time before forcing a ledger rollover for a topic                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | `240`                                                                                        |
| `config.managedLedgerMaxUnackedRangesToPersist`                  | Max number of “acknowledgment holes” that are going to be persistently stored. When acknowledging out of order, a consumer will leave holes that are supposed to be quickly filled by acking all the messages. The information of which messages are acknowledged is persisted by compressing in “ranges” of messages that were acknowledged. After the max number of ranges is reached, the information will only be tracked in memory and messages will be redelivered in case of crashes.                                                                                         | `1000`                                                                                       |
| `config.managedLedgerMinLedgerRolloverTimeMinutes`               | Minimum time between ledger rollover for a topic                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `10`                                                                                         |
| `config.managedLedgerOffloadAutoTriggerSizeThresholdBytes`       | The number of bytes before triggering automatic offload to long term storage                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | `-1`                                                                                         |
| `config.managedLedgerOffloadDeletionLagMs`                       | Delay between a ledger being successfully offloaded to long term storage and the ledger being deleted from bookkeeper                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `14400000`                                                                                   |
| `config.managedLedgerOffloadDriver`                              | The directory for all the offloader implementations offloadersDirectory=./offloaders. Driver to use to offload old data to long term storage (Possible values: S3, aws-s3, google-cloud-storage). When using google-cloud-storage, Make sure both Google Cloud Storage and Google Cloud Storage JSON API are enabled for the project (check from Developers Console -> Api&auth -> APIs).                                                                                                                                                                                            | `nil`                                                                                        |
| `config.managedLedgerOffloadMaxThreads`                          | Maximum number of thread pool threads for ledger offloading                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `2`                                                                                          |
| `config.managedLedgerOffloadPrefetchRounds`                      | The maximum prefetch rounds for ledger reading for offloading.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `1`                                                                                          |
| `config.managedLedgerUnackedRangesOpenCacheSetEnabled`           | Use Open Range-Set to cache unacknowledged messages                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `true`                                                                                       |
| `config.maxConcurrentLookupRequest`                              | Max number of concurrent lookup request broker allows to throttle heavy incoming lookup traffic                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `50000`                                                                                      |
| `config.maxConcurrentTopicLoadRequest`                           | Max number of concurrent topic loading request broker allows to control number of zk-operations                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `5000`                                                                                       |
| `config.maxConsumersPerSubscription`                             | Maximum number of consumers allowed to connect to a subscription. Once this limit reaches, the broker rejects new consumers until the number of connected consumers decreases. When the value is set to 0, the limit check is disabled.                                                                                                                                                                                                                                                                                                                                              | `0`                                                                                          |
| `config.maxConsumersPerTopic`                                    | Maximum number of consumers allowed to connect to a topic. Once this limit reaches, the broker rejects new consumers until the number of connected consumers decreases. When the value is set to 0, the limit check is disabled.                                                                                                                                                                                                                                                                                                                                                     | `0`                                                                                          |
| `config.maxMessagePublishBufferSizeInMB`                         | The maximum memory size for a broker to handle messages that are sent by producers. If the processing message size exceeds this value, the broker stops reading data from the connection. The processing messages refer to the messages that are sent to the broker but the broker has not sent response to the client. Usually the messages are waiting to be written to bookies. It is shared across all the topics running in the same broker. The value -1 disables the memory limitation. By default, it is 50% of direct memory.                                               | `nil`                                                                                        |
| `config.maxMessageSize`                                          | Set the maximum size of a message.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `5242880`                                                                                    |
| `config.maxNamespacesPerTenant`                                  | The maximum number of namespaces that can be created in each tenant. When the number of namespaces reaches this threshold, the broker rejects the request of creating a new tenant. The default value 0 disables the check.                                                                                                                                                                                                                                                                                                                                                          | `0`                                                                                          |
| `config.maxNumPartitionsPerPartitionedTopic`                     | Max number of partitions per partitioned topic. Use 0 or negative number to disable the check                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `0`                                                                                          |
| `config.maxProducersPerTopic`                                    | Maximum number of producers allowed to connect to a topic. Once this limit reaches, the broker rejects new producers until the number of connected producers decreases. When the value is set to 0, the limit check is disabled.                                                                                                                                                                                                                                                                                                                                                     | `0`                                                                                          |
| `config.maxSubscriptionsPerTopic`                                | Maximum number of subscriptions allowed to subscribe to a topic. Once this limit reaches, the broker rejects new subscriptions until the number of subscriptions decreases. When the value is set to 0, the limit check is disabled.                                                                                                                                                                                                                                                                                                                                                 | `0`                                                                                          |
| `config.maxTenants`                                              | The maximum number of tenants that can be created in each Pulsar cluster. When the number of tenants reaches the threshold, the broker rejects the request of creating a new tenant. The default value 0 disables the check.                                                                                                                                                                                                                                                                                                                                                         | `0`                                                                                          |
| `config.maxTopicsPerNamespace`                                   | The maximum number of persistent topics that can be created in the namespace. When the number of topics reaches this threshold, the broker rejects the request of creating a new topic, including the auto-created topics by the producer or consumer, until the number of connected consumers decreases. The default value 0 disables the check.                                                                                                                                                                                                                                    | `0`                                                                                          |
| `config.maxUnackedMessagesPerConsumer`                           | Max number of unacknowledged messages allowed to receive messages by a consumer on a shared subscription. Broker will stop sending messages to consumer once, this limit reaches until consumer starts acknowledging messages back. Using a value of 0, is disabling unackeMessage limit check and consumer can receive messages without any restriction                                                                                                                                                                                                                             | `50000`                                                                                      |
| `config.maxUnackedMessagesPerSubscription`                       | Max number of unacknowledged messages allowed per shared subscription. Broker will stop dispatching messages to all consumers of the subscription once this limit reaches until consumer starts acknowledging messages back and unack count reaches to limit/2. Using a value of 0, is disabling unackedMessage-limit check and dispatcher can dispatch messages without any restriction                                                                                                                                                                                             | `200000`                                                                                     |
| `config.messageExpiryCheckIntervalInMinutes`                     | The frequency of proactively checking and purging expired messages.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `5`                                                                                          |
| `config.messagePublishBufferCheckIntervalInMillis`               | Interval between checks to see if message publish buffer size exceeds the maximum. Use 0 or negative number to disable the max publish buffer limiting.                                                                                                                                                                                                                                                                                                                                                                                                                              | `100`                                                                                        |
| `config.metadataStoreBatchingEnabled`                            | Enable metadata operations batching.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `true`                                                                                       |
| `config.metadataStoreBatchingMaxDelayMillis`                     | Maximum delay to impose on batching grouping.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `5`                                                                                          |
| `config.metadataStoreBatchingMaxOperations`                      | Maximum number of operations to include in a singular batch.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | `1000`                                                                                       |
| `config.metadataStoreBatchingMaxSizeKb`                          | Maximum size of a batch.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | `128`                                                                                        |
| `config.metadataStoreCacheExpirySeconds`                         | Metadata store cache expiry time in seconds                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `300`                                                                                        |
| `config.metadataStoreSessionTimeoutMillis`                       | Metadata store session timeout in milliseconds                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `30000`                                                                                      |
| `config.narExtractionDirectory`                                  | The extraction directory of the nar package. Available for Protocol Handler, Additional Servlets, Entry Filter, Offloaders, Broker Interceptor.                                                                                                                                                                                                                                                                                                                                                                                                                                      | `System.getProperty("java.io.tmpdir")`                                                       |
| `config.offloadersDirectory`                                     | The directory for all the offloader implementations.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `./offloaders`                                                                               |
| `config.packagesManagementStorageProvider`                       | The packages management service storage service provide                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | `org.apache.pulsar.packages.management.storage.bookkeeper.BookKeeperPackagesStorageProvider` |
| `config.packagesReplicas`                                        | When the packages storage provider is bookkeeper, you can use this configuration to control the number of replicas for storing the package                                                                                                                                                                                                                                                                                                                                                                                                                                           | `1`                                                                                          |
| `config.packagesManagementLedgerRootPath`                        | The bookkeeper ledger root path                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `/ledgers`                                                                                   |
| `config.preciseTopicPublishRateLimiterEnable`                    | Enable precise topic publish rate limiting.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `false`                                                                                      |
| `config.preferLaterVersions`                                     | If true, (and ModularLoadManagerImpl is being used), the load manager will attempt to use only brokers running the latest software version (to minimize impact to bundles)                                                                                                                                                                                                                                                                                                                                                                                                           | `false`                                                                                      |
| `config.replicatedSubscriptionsSnapshotFrequencyMillis`          | The frequency of snapshots for replicated subscriptions tracking.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | `1000`                                                                                       |
| `config.replicatedSubscriptionsSnapshotMaxCachedPerSubscription` | The maximum number of snapshot to be cached per subscription.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `10`                                                                                         |
| `config.replicatedSubscriptionsSnapshotTimeoutSeconds`           | The timeout for building a consistent snapshot for tracking replicated subscriptions state.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `30`                                                                                         |
| `config.replicationConnectionsPerBroker`                         | Max number of connections to open for each broker in a remote cluster More connections host-to-host lead to better throughput over high-latency links.                                                                                                                                                                                                                                                                                                                                                                                                                               | `16`                                                                                         |
| `config.replicationMetricsEnabled`                               | Enable replication metrics                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | `true`                                                                                       |
| `config.replicationProducerQueueSize`                            | Replicator producer queue size                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `1000`                                                                                       |
| `config.replicatorPrefix`                                        | Replicator prefix used for replicator producer name and cursor name pulsar.repl                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `nil`                                                                                        |
| `config.retentionCheckIntervalInSeconds`                         | Check between intervals to see if consumed ledgers need to be trimmed. Use 0 or negative number to disable the check.                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `120`                                                                                        |
| `config.s3ManagedLedgerOffloadBucket`                            | For Amazon S3 ledger offload, Bucket to place offloaded ledger into                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `nil`                                                                                        |
| `config.s3ManagedLedgerOffloadMaxBlockSizeInBytes`               | For Amazon S3 ledger offload, Max block size in bytes. (64MB by default, 5MB minimum)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `67108864`                                                                                   |
| `config.s3ManagedLedgerOffloadReadBufferSizeInBytes`             | For Amazon S3 ledger offload, Read buffer size in bytes (1MB by default)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | `1048576`                                                                                    |
| `config.s3ManagedLedgerOffloadRegion`                            | For Amazon S3 ledger offload, AWS region                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | `nil`                                                                                        |
| `config.s3ManagedLedgerOffloadRole`                              | For Amazon S3 ledger offload, provide a role to assume before writing to s3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `nil`                                                                                        |
| `config.s3ManagedLedgerOffloadRoleSessionName`                   | For Amazon S3 ledger offload, provide a role session name when using a role                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `pulsar-s3-offload`                                                                          |
| `config.s3ManagedLedgerOffloadServiceEndpoint`                   | For Amazon S3 ledger offload, Alternative endpoint to connect to (useful for testing)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `nil`                                                                                        |
| `config.schemaCompatibilityStrategy`                             | The schema compatibility strategy at broker level, see here for available values.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | `FULL`                                                                                       |
| `config.schemaRegistryStorageClassName`                          | The schema storage implementation used by this broker.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | `org.apache.pulsar.broker.service.schema.BookkeeperSchemaStorageFactory`                     |
| `config.skipBrokerShutdownOnOOM`                                 | Flag to skip broker shutdown when broker handles Out of memory error.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `false`                                                                                      |
| `config.statsUpdateFrequencyInSecs`                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `60`                                                                                         |
| `config.statsUpdateInitialDelayInSecs`                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `60`                                                                                         |
| `config.statusFilePath`                                          | Path for the file used to determine the rotation status for the broker when responding to service discovery health checks                                                                                                                                                                                                                                                                                                                                                                                                                                                            | `nil`                                                                                        |
| `config.strictBookieAffinityEnabled`                             | Enable or disable the strict bookie isolation strategy. If enabled, bookie-ensemble first tries to choose bookies that belong to a namespace's affinity group. If the number of bookies is not enough, then the rest bookies are chosen. If namespace has no affinity group, bookie-ensemble only chooses bookies that belong to no region. If the number of bookies is not enough, BKNotEnoughBookiesException is thrown.                                                                                                                                                           | `false`                                                                                      |
| `config.subscriptionExpirationTimeMinutes`                       | How long to delete inactive subscriptions from last consuming. Setting this configuration to a value greater than 0 deletes inactive subscriptions automatically. Setting this configuration to 0 does not delete inactive subscriptions automatically. Since this configuration takes effect on all topics, if there is even one topic whose subscriptions should not be deleted automatically, you need to set it to 0. Instead, you can set a subscription expiration time for each namespace using the pulsar-admin namespaces set-subscription-expiration-time options command. | `0`                                                                                          |
| `config.subscriptionRedeliveryTrackerEnabled`                    | Enable subscription message redelivery tracker                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `true`                                                                                       |
| `config.subscriptionTypesEnabled`                                | Enable all subscription types, which are exclusive, shared, failover, and key_shared.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `Exclusive, Shared, Failover, Key_Shared`                                                    |
| `config.superUserRoles`                                          | Role names that are treated as “super-user”, meaning they will be able to do all admin operations and publish/consume from all topics                                                                                                                                                                                                                                                                                                                                                                                                                                                | `nil`                                                                                        |
| `config.supportedNamespaceBundleSplitAlgorithms`                 | Supported algorithms name for namespace bundle split                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `["range_equally_divide","topic_count_equally_divide"]`                                      |
| `config.systemTopicSchemaCompatibilityStrategy`                  | The schema compatibility strategy is used for system topics, see here for available values.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `ALWAYS_COMPATIBLE`                                                                          |
| `config.tlsAllowInsecureConnection`                              | Accept untrusted TLS certificate from client. If it is set to true, a client with a cert which cannot be verified with the 'tlsTrustCertsFilePath' cert will be allowed to connect to the server, though the cert will not be used for client authentication.                                                                                                                                                                                                                                                                                                                        | `false`                                                                                      |
| `config.tlsCiphers`                                              | Specify the tls cipher the broker will use to negotiate during TLS Handshake. Multiple values can be specified, separated by commas. Example:- TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256                                                                                                                                                                                                                                                                                                                                                                                                 | `nil`                                                                                        |
| `config.tlsProtocols`                                            | Specify the tls protocols the broker will use to negotiate during TLS Handshake. Multiple values can be specified, separated by commas. Example:- TLSv1.3, TLSv1.2                                                                                                                                                                                                                                                                                                                                                                                                                   | `nil`                                                                                        |
| `config.tokenAudience`                                           | The token audience stands for this broker. The field tokenAudienceClaim of a valid token, need contains this.                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | `nil`                                                                                        |
| `config.tokenAudienceClaim`                                      | The token audience "claim" name, e.g. "aud", that will be used to get the audience from token. If not set, audience will not be verified.                                                                                                                                                                                                                                                                                                                                                                                                                                            | `nil`                                                                                        |
| `config.tokenAuthClaim`                                          | Specify which of the token's claims will be used as the authentication "principal" or "role". The default "sub" claim will be used if this is left blank                                                                                                                                                                                                                                                                                                                                                                                                                             | `nil`                                                                                        |
| `config.tokenPublicAlg`                                          | Configure the algorithm to be used to validate auth tokens. This can be any of the asymettric algorithms supported by Java JWT (https://github.com/jwtk/jjwt#signature-algorithms-keys)                                                                                                                                                                                                                                                                                                                                                                                              | `RS256`                                                                                      |
| `config.tokenPublicKey`                                          | Configure the public key to be used to validate auth tokens. The key can be specified like: tokenPublicKey=data:;base64,xxxxxxxxx or tokenPublicKey=file:///my/secret.key. Note: key file must be DER-encoded.                                                                                                                                                                                                                                                                                                                                                                       | `nil`                                                                                        |
| `config.tokenSecretKey`                                          | Configure the secret key to be used to validate auth tokens. The key can be specified like: tokenSecretKey=data:;base64,xxxxxxxxx or tokenSecretKey=file:///my/secret.key. Note: key file must be DER-encoded.                                                                                                                                                                                                                                                                                                                                                                       | `nil`                                                                                        |
| `config.tokenSettingPrefix`                                      | Configure the prefix of the token-related settings, such as tokenSecretKey, tokenPublicKey, tokenAuthClaim, tokenPublicAlg, tokenAudienceClaim, and tokenAudience.                                                                                                                                                                                                                                                                                                                                                                                                                   | `nil`                                                                                        |
| `config.topicFencingTimeoutSeconds`                              | If a topic remains fenced for a certain time period (in seconds), it is closed forcefully. If set to 0 or a negative number, the fenced topic is not closed.                                                                                                                                                                                                                                                                                                                                                                                                                         | `0`                                                                                          |
| `config.transactionCoordinatorEnabled`                           | Whether to enable transaction coordinator in broker.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `true`                                                                                       |
| `config.transactionMetadataStoreProviderClassName`               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `org.apache.pulsar.transaction.coordinator.impl.InMemTransactionMetadataStoreProvider`       |
| `config.transactionBufferSnapshotMaxTransactionCount`            | Transaction buffer take snapshot transaction count                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `1000`                                                                                       |
| `config.transactionBufferSnapshotMinTimeInMillis`                | Transaction buffer take snapshot interval time. Unit : millisecond                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `5000`                                                                                       |
| `config.transactionBufferClientMaxConcurrentRequests`            | The max concurrent requests for transaction buffer client, default is 1000                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | `1000`                                                                                       |
| `config.transactionPendingAckLogIndexMinLag`                     | MLPendingAckStore maintains a ConcurrentSkipListMap pendingAckLogIndex, It stores the position in pendingAckStore as its value and saves a position used to determine whether the previous data can be cleaned up as a key. transactionPendingAckLogIndexMinLag is used to configure the minimum lag between indexes                                                                                                                                                                                                                                                                 | `500`                                                                                        |
| `config.ttlDurationDefaultInSeconds`                             | The default Time to Live (TTL) for namespaces if the TTL is not configured at namespace policies. When the value is set to 0, TTL is disabled. By default, TTL is disabled.                                                                                                                                                                                                                                                                                                                                                                                                          | `0`                                                                                          |
| `config.webSocketConnectionsPerBroker`                           | The number of connections per Broker in Pulsar Client used in WebSocket proxy.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `Runtime.getRuntime().availableProcessors()`                                                 |
| `config.webSocketMaxTextFrameSize`                               | The maximum size of a text message during parsing in WebSocket proxy.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `1048576`                                                                                    |
| `config.webSocketNumIoThreads`                                   | The number of IO threads in Pulsar Client used in WebSocket proxy.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `Runtime.getRuntime().availableProcessors()`                                                 |
| `config.webSocketServiceEnabled`                                 | Enable the WebSocket API service in broker                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | `false`                                                                                      |
| `config.webSocketSessionIdleTimeoutMillis`                       | Time in milliseconds that idle WebSocket session times out.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `300000`                                                                                     |
| `config.extraConfigValues`                                       | Additional config values                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | `{}`                                                                                         |


### Ingress parameters

Configure the ingress for Component. Refer to [ingress documentation](https://kubernetes.io/docs/user-guide/ingress/) for more.

| Name                       | Description                                                                                                             | Value                    |
| -------------------------- | ----------------------------------------------------------------------------------------------------------------------- | ------------------------ |
| `ingress.enabled`          | Enable the creation of an ingress for the Component                                                                     | `false`                  |
| `ingress.pathType`         | Path type for the Component  ingress                                                                                    | `ImplementationSpecific` |
| `ingress.apiVersion`       | Ingress API version for the Component  ingress                                                                          | `""`                     |
| `ingress.hostname`         | Ingress hostname for the Component  ingress                                                                             | `broker.server.local`    |
| `ingress.path`             | Path array for the Component  ingress                                                                                   | `/`                      |
| `ingress.annotations`      | Annotations for the Component  ingress. To enable certificate autogeneration, place here your cert-manager annotations. | `{}`                     |
| `ingress.extraHosts`       | Extra hosts array for the Component  ingress                                                                            | `[]`                     |
| `ingress.extraPaths`       | Extra paths for the Component  ingress                                                                                  | `[]`                     |
| `ingress.tls`              | Enable TLS for the Component  ingress                                                                                   | `false`                  |
| `ingress.extraTls`         | Extra TLS configuration for the Component  ingress                                                                      | `[]`                     |
| `ingress.secrets`          | Secrets array to mount into the Ingress                                                                                 | `[]`                     |
| `ingress.ingressClassName` | IngressClass that will be be used to implement the Ingress (Kubernetes 1.18+)                                           | `""`                     |
| `ingress.extraRules`       | Additional rules to be covered with this ingress record                                                                 | `[]`                     |


### Service parameters

Component application controller service and service account parameters. Note the data-store's service is headless because it only needs to communicate with other cluster components.

| Name                                          | Description                                                                                | Value       |
| --------------------------------------------- | ------------------------------------------------------------------------------------------ | ----------- |
| `service.type`                                | Broker service type                                                                        | `ClusterIP` |
| `service.ports.pulsar`                        | Broker application controller binary service port                                          | `6650`      |
| `service.ports.pulsarSsl`                     | Broker application controller secure binary service port                                   | `6651`      |
| `service.ports.http`                          | Broker application controller web service port                                             | `8080`      |
| `service.ports.https`                         | Broker application controller secure web service port                                      | `8081`      |
| `service.nodePorts.pulsar`                    | Node port for binary connections                                                           | `30650`     |
| `service.nodePorts.pulsarSsl`                 | Node port for secure binary connections                                                    | `30651`     |
| `service.nodePorts.http`                      | Node port for web connections                                                              | `30080`     |
| `service.nodePorts.https`                     | Node port for secure web connections                                                       | `30081`     |
| `service.clusterIP`                           | Broker application controller service Cluster IP                                           | `""`        |
| `service.loadBalancerIP`                      | Broker application controller service Load Balancer IP                                     | `""`        |
| `service.loadBalancerSourceRanges`            | Broker application controller service Load Balancer sources                                | `[]`        |
| `service.externalTrafficPolicy`               | Broker application controller service external traffic policy                              | `Cluster`   |
| `service.annotations`                         | Additional custom annotations for Component application controller service                 | `{}`        |
| `service.extraPorts`                          | Extra ports to expose (normally used with the `sidecar` value)                             | `[]`        |
| `service.sessionAffinity`                     | Session Affinity for Kubernetes service, can be "None" or "ClientIP"                       | `None`      |
| `service.sessionAffinityConfig`               | Additional settings for the sessionAffinity                                                | `{}`        |
| `serviceAccount.name`                         | The name of the ServiceAccount to use.                                                     | `""`        |
| `serviceAccount.create`                       | Specifies whether a ServiceAccount should be created                                       | `true`      |
| `serviceAccount.automountServiceAccountToken` | Automount service account token for the server service account                             | `true`      |
| `serviceAccount.annotations`                  | Annotations for service account. Evaluated as a template. Only used if `create` is `true`. | `{}`        |
| `podDisruptionBudget.enabled`                 | Enable the disruption budget                                                               | `true`      |
| `podDisruptionBudget.maxUnavailable`          | When enabled the maximum allowed unavailable for matchLabel objects                        | `1`         |
| `podDisruptionBudget.minAvailable`            | When enabled the min allowed available for matchLabel objects                              | `nil`       |


### Other Parameters

| Name                                    | Description                                                                                                                                                                                   | Value                                     |
| --------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------- |
| `podManagementPolicy`                   | StatefulSet controller supports relax its ordering guarantees while preserving its uniqueness and identity guarantees. There are two valid pod management policies: OrderedReady and Parallel | `Parallel`                                |
| `updateStrategy.type`                   | Bookkeeper statefulset strategy type                                                                                                                                                          | `RollingUpdate`                           |
| `updateStrategy.rollingUpdate`          | Bookkeeper statefulset rolling update configuration parameters                                                                                                                                | `{}`                                      |
| `podLabels`                             | Extra labels for Bookkeeper pods                                                                                                                                                              | `{}`                                      |
| `podAnnotations`                        | Extra annotations for Bookkeeper pods                                                                                                                                                         | `{}`                                      |
| `hostAliases`                           | Bookkeeper pods host aliases                                                                                                                                                                  | `[]`                                      |
| `hostNetwork`                           | Specify if host network should be enabled for Bookkeeper pods                                                                                                                                 | `false`                                   |
| `hostIPC`                               | Specify if host IPC should be enabled for Bookkeeper pods                                                                                                                                     | `false`                                   |
| `schedulerName`                         | Name of the k8s scheduler (other than default)                                                                                                                                                | `""`                                      |
| `affinity`                              | Affinity for pod assignment                                                                                                                                                                   | `{}`                                      |
| `podAffinityPreset`                     | Pod affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                                                                                                           | `""`                                      |
| `podAntiAffinityPreset`                 | Pod anti-affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                                                                                                      | `hard`                                    |
| `nodeAffinityPreset.type`               | Node affinity preset type. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                                                                                                     | `""`                                      |
| `nodeAffinityPreset.key`                | Node label key to match Ignored if `affinity` is set.                                                                                                                                         | `""`                                      |
| `nodeAffinityPreset.values`             | Node label values to match. Ignored if `affinity` is set.                                                                                                                                     | `[]`                                      |
| `nodeSelector`                          | Node labels for pod assignment                                                                                                                                                                | `{}`                                      |
| `tolerations`                           | Tolerations for pod assignment                                                                                                                                                                | `[]`                                      |
| `topologySpreadConstraints`             | Topology Spread Constraints for pod assignment spread across your cluster among failure-domains. Evaluated as a template                                                                      | `[]`                                      |
| `terminationGracePeriodSeconds`         | Seconds the pod needs to gracefully terminate                                                                                                                                                 | `60`                                      |
| `priorityClassName`                     | Name of the existing priority class to be used by Bookkeeper pods                                                                                                                             | `""`                                      |
| `podSecurityContext.enabled`            | Enable security context for the pods                                                                                                                                                          | `true`                                    |
| `podSecurityContext.fsGroup`            | Set Bookkeeper pod's Security Context fsGroup                                                                                                                                                 | `1001`                                    |
| `containerSecurityContext.enabled`      | Enable Bookkeeper containers' Security Context                                                                                                                                                | `true`                                    |
| `containerSecurityContext.runAsUser`    | Set Bookkeeper containers' Security Context runAsUser                                                                                                                                         | `1001`                                    |
| `containerSecurityContext.runAsNonRoot` | Set Bookkeeper containers' Security Context runAsNonRoot                                                                                                                                      | `true`                                    |
| `containerCommand`                      | Override the container image ENTRYPOINT. Leave blank to use image default (if set)                                                                                                            | `["sh","-c","/pulsar/bin/pulsar broker"]` |
| `containerArgs`                         | Override the container image CMD. Leave blank to use image default (if set)                                                                                                                   | `[]`                                      |
| `extraEnvVars`                          | Extra environment variables to add to the provisioning pod                                                                                                                                    | `[]`                                      |
| `extraEnvVarsCM`                        | ConfigMap with extra environment variables                                                                                                                                                    | `""`                                      |
| `extraEnvVarsSecret`                    | Secret with extra environment variables                                                                                                                                                       | `""`                                      |
| `initContainers`                        | Add additional Add init containers to the Bookkeeper pod(s)                                                                                                                                   | `[]`                                      |
| `containerPorts.pulsar`                 | Broker binary port                                                                                                                                                                            | `6650`                                    |
| `containerPorts.pulsarSsl`              | Broker secure binary port                                                                                                                                                                     | `6651`                                    |
| `containerPorts.http`                   | Broker web port                                                                                                                                                                               | `8080`                                    |
| `containerPorts.https`                  | Broker secure web                                                                                                                                                                             | `8081`                                    |


### Persistence parameters

| Name                           | Description                                                                                                     | Value               |
| ------------------------------ | --------------------------------------------------------------------------------------------------------------- | ------------------- |
| `logPersistence.mountPath`     | Mount path of Pulsar home                                                                                       | `/pulsar/logs`      |
| `logPersistence.size`          | PVC storage size                                                                                                | `5Gi`               |
| `logPersistence.storageClass`  | PVC Storage Class for Kafka data volume                                                                         | `nil`               |
| `logPersistence.existingClaim` | A manually managed Persistent Volume and Claim                                                                  | `""`                |
| `logPersistence.accessModes`   | Persistent Volume Access Modes                                                                                  | `["ReadWriteOnce"]` |
| `logPersistence.annotations`   | Annotations for the PVC                                                                                         | `{}`                |
| `logPersistence.selector`      | Selector to match an existing Persistent Volume. If set, the PVC can't have a PV dynamically provisioned for it | `{}`                |


### Pod Probes

| Name                              | Description                                                                                   | Value                             |
| --------------------------------- | --------------------------------------------------------------------------------------------- | --------------------------------- |
| `livenessProbe.enabled`           | Enable livenessProbe on broker containers                                                     | `true`                            |
| `livenessProbe.exec.command`      | Process to monitor for readiness                                                              | `["/pulsar/probes/liveness.sh"]`  |
| `livenessProbe.periodSeconds`     | Period seconds for readinessProbe                                                             | `3`                               |
| `livenessProbe.timeoutSeconds`    | Timeout seconds for readinessProbe                                                            | `30`                              |
| `livenessProbe.failureThreshold`  | Failure threshold for readinessProbe                                                          | `5`                               |
| `livenessProbe.successThreshold`  | Success threshold for readinessProbe                                                          | `1`                               |
| `readinessProbe.enabled`          | Enable readinessProbe on broker containers                                                    | `true`                            |
| `readinessProbe.exec.command`     | Process to monitor for readiness                                                              | `["/pulsar/probes/readiness.sh"]` |
| `readinessProbe.periodSeconds`    | Period seconds for readinessProbe                                                             | `5`                               |
| `readinessProbe.failureThreshold` | Failure threshold for readinessProbe                                                          | `1`                               |
| `readinessProbe.successThreshold` | Success threshold for readinessProbe                                                          | `1`                               |
| `startupProbe.enabled`            | Enable startupProbe on broker containers                                                      | `true`                            |
| `startupProbe.exec.command`       | Process to monitor for readiness                                                              | `["/pulsar/probes/startup.sh"]`   |
| `startupProbe.periodSeconds`      | Period seconds for readinessProbe                                                             | `3`                               |
| `startupProbe.failureThreshold`   | Failure threshold for readinessProbe                                                          | `10`                              |
| `lifecycleHooks`                  | lifecycleHooks for the Bookkeeper container to automate configuration before or after startup | `{}`                              |
| `resources.limits`                | The resources limits for the container                                                        | `{}`                              |
| `resources.requests.memory`       | The requested resource memory for the container                                               | `2Gi`                             |
| `resources.requests.cpu`          | The requested resource cpu for the container                                                  | `1`                               |
| `extraVolumes`                    | Optionally specify extra list of additional volumes for the Bookkeeper pod(s)                 | `[]`                              |
| `extraVolumeMounts`               | Optionally specify extra list of additional volumeMounts for the Bookkeeper container(s)      | `[]`                              |
| `sidecars`                        | Add additional sidecar containers to the Bookkeeper pod(s)                                    | `[]`                              |

