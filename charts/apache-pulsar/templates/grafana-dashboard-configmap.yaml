{{- if (eq .Values.global.observability.dashboards true) -}}
{{ range $path, $_ :=  .Files.Glob "files/dashboards/**.json" }}
  {{- $name := (base $path) | replace (ext $path) "" }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ (printf "dashboard-%s" $name) | quote }}
  labels:
    grafana_dashboard: "1"
    grafana_dashboard_folder: "pulsar"
data:
{{ ($.Files.Glob $path).AsConfig | indent 2 }}
---
{{ end }}
{{ end }}